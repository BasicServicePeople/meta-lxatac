From: =?UTF-8?q?Leonard=20G=C3=B6hrs?= <l.goehrs@pengutronix.de>
Date: Tue, 16 Nov 2021 13:06:35 +0100
Subject: [PATCH] ARM: dts: stm32: force peripheral mode for LXATAC USB OTG
 interface
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The USB OTG interface is hardwired to operate in "peripheral" mode.
The state of the VBUS and ID pins in the hardware should also reflect this, but
setting dr_mode = "peripheral" expresses the design intent better.

Signed-off-by: Leonard GÃ¶hrs <l.goehrs@pengutronix.de>
---
 arch/arm/boot/dts/stm32mp157c-lxa-tac.dts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/arm/boot/dts/stm32mp157c-lxa-tac.dts b/arch/arm/boot/dts/stm32mp157c-lxa-tac.dts
index 6a55e5d289a2..64c528db9ff1 100644
--- a/arch/arm/boot/dts/stm32mp157c-lxa-tac.dts
+++ b/arch/arm/boot/dts/stm32mp157c-lxa-tac.dts
@@ -487,6 +487,7 @@ fixed-link {
 &usbotg_hs {
 	phys = <&usbphyc_port1 0>;
 	phy-names = "usb2-phy";
+	dr_mode = "peripheral";
 	vusb_d-supply = <&vdd_usb>;
 	vusb_a-supply = <&reg18>;
 	status = "okay";
